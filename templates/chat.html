<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Chat Room</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body data-username="{{ username }}">
    <div class="chat-container">
        <div class="chat-header">
            <h2>Chào, {{ username }}</h2>
            <a href="/logout">Logout</a>
        </div>

        <div id="chat-box">
            {% for msg in messages %}
                <div class="msg {% if msg.sender_id == 0 %}system{% elif msg.sender.username == username %}self{% else %}other{% endif %}">
                    [{{ msg.timestamp | hms_local }}] 
                    <b>{{ msg.sender.username if msg.sender else 'System' }}</b>: {{ msg.content | e }}
                </div>
            {% endfor %}
        </div>

        <div class="chat-input">
            <input type="text" id="message" placeholder="Nhập tin nhắn..." />
            <button id="send">Gửi</button>
        </div>
    </div>

    <!-- Socket.IO client -->
    <script src="https://cdn.socket.io/4.7.1/socket.io.min.js"></script>
    <script src="/static/app.js"></script>
</body>
</html>
